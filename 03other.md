<a id="mulu">目录</a>
<a href="#mulu" class="back">回到目录</a>
<style>
    .back{width:40px;height:40px;display:inline-block;line-height:20px;font-size:20px;background-color:lightyellow;position: fixed;bottom:50px;right:50px;z-index:999;border:2px solid pink;opacity:0.3;transition:all 0.3s;color:green;}
    .back:hover{color:red;opacity:1}
    img{vertical-align:bottom;}
</style>

<!-- @import "[TOC]" {cmd="toc" depthFrom=3 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [计算](#计算)
- [操作系统](#操作系统)

<!-- /code_chunk_output -->

<!-- 打开侧边预览：f1->Markdown Preview Enhanced: open...
只有打开侧边预览时保存才自动更新目录 -->

### 计算
**IPv6简写规则**：
- 每组前面的0的可以省略不写
    完整`2403:A200:A200:1100:0000:0000:0F00:0003`
    简写`2403:A200:A200:1100:0000:0000:F00:3`
- 连续为0的一组或多组，可以用`::`代替，一个IP中只能用一次`::`
    完整：`2403:A200:A200:1100:0000:0000:0F00:0003`
    简写：`2403:A200:A200:1100::F00:3`
- 如果一组中全为0，又不想用`::`代替，每组中要保留1个0
    完整：`2403:A200:A200:0000:AFFF:0000:0000:0003`
    简写：`2403:A200:A200:0:AFFF::3`

**页表占多少页面**：虚拟地址空间大小*物理页号/页面大小^2^
**磁盘空间利用率**：
- 没有采用成组操作时：每个逻辑记录长度/块大小
- 采用成组操作时：每个逻辑记录长度/块大小*块因子

**每个进程最多可申请的资源数**=总资源数/进程数，向上取整
**用户程序最多可分成多少页**：2^逻辑地址位数^/内存分块大小
**有效访问时间**：访问内存时间+访问内存时间*(1-快表命中率)
**时间片设置**：响应时间/用户数
**进程最多申请资源个数**：[资源总数/进程数]+余数

---

### 操作系统
操作系统--用户接口  
- 操作系统主要部分：进、存、设、文（进村舌吻）
- 应用--人机接口
- 软件--软件开发平台
- 存储设备--没网盘
- 接口--图标命令调用
- 名称--没snmp/eclipse
- 类型--没多用户、没工业
- 安卓特性--移动应用、支持网络
- 观点--全都选
- 文件安全：副本、转储、访问控制
- 设备分配：不选设备分配表
- 设备与CPU：不选设备控制

各种系统：
- 微内核
  - 特点无单向
  - 优点无通信效率

程序：
- 多道程序：独立随机共享
  - 提高利用率、缩短时间，宏观同时、微管顺序  
  - 并行--CPU和外设
  - 没有单一分区
- 并发程序--不对应、不再现、不封闭、相制约

进程：
- 运行[0,1] 就绪[0,max-1]
- 等待->就绪：唤醒
- 运行->就绪：时间片到，现场信息必保存
- 设备忙不终止
- 创建后首先就绪
- 资源长期不满足就挂起
- 进程调度一定不：就绪->运行 一定：运行->就绪
- PV不能实现共享
- 进程交换：代码数据控制块
- 设备分配时不创建
- **进程控制块/进程**：进程代码数据
  - 无库表
- **进程优先级**：
  - 一般系统、静态不变、动态提升
  - 常驻自己内存
- 进程调度：任何交互情景  一个运行  功能没有唤醒  时机全选
- 线程描述表：现场+两值
- 线程无空间
- 叙述：初值≥0 资源分配
- 信号量：pv p 0
- 并发进程不平等  相互直接间接不感知
- 进程互斥没有分派器

进程通信：
- 共享内存--大量信息
- 消息机制--公共缓冲区队列
- 管道通信--共享文件、同步

调度算法：
- 目标：批处理--大短高  交互式--另两个
- 高优先级与时间无关

管程：
- 本身不互斥
- 对象没有量

文件：
- 分类：
  - 组织--普通目录特殊
  - 用途--系统用户
  - 保护--只读可执行
  - 存放--临时档案永久
- 文件保护：不选文件
- 文件管理：不选散列
- 性能：没有io和dma（英文不提高性能）
- 文件控制块：文件名/大小/时间/权限/者、地址  无文件描述符/列表
  - **用户--名**
  - 打开文件时不填写
- 文件目录：按名存取
  - 提高效率：无限制个数
  - 树形：用户决定，没简化管理
    - 提高速度：将Linux链接到sun

存储：依赖于物理xx
- 虚拟页式：动态扩容
  - 磁盘低就增加，多就减少
  - 分页守护在后台
- 可变分区：多道程序、移动技术、大小递增
- 页式：内存利用率高、管理简单
  - 页内低页号高
  - 快表：缓冲器 是页表子集
  - 页表相关、平衡点
  - 管理空闲内存：空闲 位示图
- 虚存：没有分区
- 一个进程分配内存/都连续：分区
- 可扩容：虚拟

虚存：
- 计算机地址位宽
- 抖动--页面置换算法
- 硬件--缺页中断
- 新页面--磁盘文件
- 页表--有效 修改 访问
- 判断内存--驻留 中断
- 页面置换--访问 修改
- 没有越界中断
- 数据结构：空 页 位
- 叙述：支持 运行 空间  无内存  无不变化

物理结构：顺序链接索引节点
- 逻辑块号->磁盘块号
- 顺序：产生碎片
- 链接：fat32
- 成组链接：unix空闲区
- 随机存取：连续、索引

硬盘读写：
- 数据传输时间最短，调度时间无影响
- 电梯--扫描
- 最短寻道--时间短易饥饿
- 

I/O：低速高速是缓冲
- 缓冲池重点是缓冲区同步
- 设备独立层：映射到物理设备，便于用户使用
- 顺序：系统设备控制器
- DMA：块设备主要、不经过CPU
- 中断：字符设备主要、不查询状态
- 程序直接控制：检测完成位
  - 准备就绪：输出已空 可写数据
- 通道控制：有自己的指令程序
- 没有级联堆叠技术
- 软件部分没有硬件
- 硬件：设备 适配器

页面：
- 可采用不同大小
- 只能由操作系统设置，运行中不可改
- 工作集算法

用户内核态：CPU
- 用户态/调用文件读写功能首先执行/关闭中断--访管
- 内核->用户：状态字
- 用户->内核：访管

页面置换：
- 先进先出FIFO：**内存时间**最长，belady异常
- 最少使用LRU：最长**时间**没使用
- 最不常用LFU：页面使用**次数**
- 理想OPT：以后不需要的
- 访问位：两最近+时钟

中断异常：
- 中断不是进程
- 进程不被打扰--屏蔽中断
- 被零除是异常
- 指令不中断

系统调用：
- write打印
- open是文件操作，将文件块读入内存
- close将文件块写入磁盘缓存
- 阻塞->挂起：suspend
- send（receiver，message）

同步互斥：
- 同步：汽车装配、进程等待消息、打印数据进程

PV操作：
- P减V增 
- 访问临界资源：先进入 最后退出
- P原语操作--进入区
- 共享--临界区
  - 保护临界资源准则：没有互斥等待
- 打印数据进程--缓冲区
- mutex中k个等待--信号量=-k
- 信号量[4, 4-20]

链接编译：
- 链接：多个程序->可运行程序
- 重定位：逻辑->物理
  - 动态重定位：逻辑->物理
  - 静态重定位：物理->物理

死锁饥饿：
- 饥饿：优先级低、得不到调度；没阻塞调度推后
- 活锁：没阻塞可调度没进展
- 死锁：阻塞无法唤醒
  - 原因：资源分配、进程推进
  - 定理：资源分配图不可化简
  - 预防：静态分配时加锁、资源有序分配  没有安全状态
  - 避免：银行家
  - 检测：资源分析
  - 解除/恢复：两个进程  没有注册表和安全模式
  - 死锁一定不是安全状态
  - 一个进程不死锁
  - 必要条件：无资源不足

其它：
- Linux无安全状态
- 可重入代码--同时共享
- 可再入程序--纯代码
- 可重用资源--内存
- 地址转换--指令执行时、硬件完成
- 空间局部性--顺序  时间--循环
- 设管--方便用户，没有改变/适配/总线
- 外设命令传递顺序：应用 独立 驱动 设备
- 测试w：w1重测 w0置位 退出复位
- spooling系统：没有xx器
- 通道：字节 数据 数组
- 设备分配：没有及时性


计算硬记：
- 小王选课--有可能
- 可变分区地址长度--下邻分区空闲
- 最大空闲分区--1234-886 1024-104
- 二级页表--3次内存
- write指令后果--写保护中断
- fifo/clock--75 lru--83/73 opt--58
- 缺页OPT选最小
- 盘面号为1
- 1000块启动2次磁盘
- n个缓冲区错误：mutex0和pp颠倒
- 读者写者：wp12可以取消
- 进程的